Output-file format
==================

The output files generated by each program are summarized in the table below:

.. csv-table::
    :header: Program, Output, Reference
    :widths: 5, 20, 10

    ``dcore_pre``, "*seedname*.h5"
    ``dcore``, *seedname*.out.h5
    , *seedname*\_sigma\_iw.npz, :doc:`../analytic_continuation/external_code`
    , work/imp_shell#\_iter#/*solver_dependent_output*
    ``dcore_check``, check/iter\_mu.dat
    , check/iter\_mu.png, :doc:`programs`
    , check/iter\_sigma-ish0.dat
    , check/iter\_sigma-ish0.png, :doc:`programs`
    , check/iter\_occup-ish0.dat
    , check/iter\_occup-ish0.png, :doc:`programs`
    , check/iter\_spin-ish0.dat
    , check/iter\_spin-ish0.png, :doc:`programs`
    , check/sigma.dat
    , check/sigma\_ave.png, :doc:`programs`
    ``dcore_anacont``, post/sigma\_w.npz, :doc:`../analytic_continuation/external_code`
    , post/sigma\_w.npz
    ``dcore_spectrum``, post/dos.dat
    , post/akw.dat
    , post/akw.gp, :doc:`programs`
    , post/momdist.dat

Files that have empty Reference in this table are explained in the following.

``dcore_pre``
~~~~~~~~~~~~~

-   *seedname*.h5

    It has two groups, ``dft_input`` and ``Dcore``.
    See `DFTTools <https://triqs.ipht.cnrs.fr/applications/dft_tools/reference/h5structure.html>`_ for the details of the data structure in ``dft_input`` group.
    The data included in ``Dcore`` group is list below:

    .. csv-table::
       :width: 100%
       :header: Name, Type, Description
       :widths: 20, 20, 60

       Umat, numpy.complex, "The values of :math:`U^i_{\alpha\beta\gamma\delta}`, where :math:`i` corresponds to the kind of correlated shell and :math:`\alpha, \beta, \gamma, \delta` denote the spin-orbital indices at each correlated shell."
       LocalPotential, numpy.complex, "The values of :math:`V^i_{s, o1, o2}`, where :math:`s` denotes the spin, and :math:`o1, o2` denote orbitals. If SO coupling is considered, the spin is included in the orbital indices."

``dcore``
~~~~~~~~~

-   *seedname*.out.h5

    All data are stored in ``dmft_out`` group.
    The following list summarizes data structure in the ``dmft_out`` group:
    See :doc:`gf_format` for the data structure of the Green's function and self-energy.

    .. csv-table::
       :width: 100%
       :header: Name, Type, Description
       :widths: 20, 20, 60

       iterations, Int, "The total number of iteration steps."
       Sigma_iw, Group, "The local self-energy in imaginary-frequency domain at each iteration step."
       chemical_potential, Group, "The chemical potential at each iteration step."
       dc_energ, Group, "The double-counting corrections to the energy at each iteration step."
       dc_imp, Group, "The double-counting self-energy term at each iteration step."
       parameters, Group, "All input parameters read from ini file."

    The latest data list can be obtained by ``h5ls`` command.

    ::

        h5ls [seedname].out.h5/dmft_out

-   solver_dependent_output

    All solver-dependent output are stored in the working directory such as **work/imp_shell#_iter#** (#'s are replaced with numbers).
    See :doc:`../impuritysolvers` for details.

``dcore_check``
~~~~~~~~~~~~~~~

-   **check/iter_mu.dat**

    The chemical potential as a function of the iteration number.
    This is the data corresponding to the figure iter_mu.png (see :ref:`program_dcore_check`).

    .. tutorial for 2D Hubbard model

    ::

        1 0.0000000000e+00
        2 1.4197880094e-01
        3 4.6478279315e-01
        4 6.3732253182e-01
        5 6.4637277925e-01
        6 6.8031573871e-01
        7 7.0882955968e-01

-   **check/iter_sigma-ish0.dat**

    The renormalization factor as a function of the iteration number.
    This is the data corresponding to the figure iter_sigma-ish0.png (see :ref:`program_dcore_check`).

    ::

        1 0.6674359500130874 0.6674359500130874
        2 0.5208316972639336 0.5208316972639336
        3 0.31558993009526837 0.31558993009526837
        4 0.17496815990309889 0.17496815990309889
        5 0.13950821208253136 0.13950821208253136
        6 0.11496910148099888 0.11496910148099888
        7 0.09665012984893595 0.09665012984893595

-   **check/iter_occup-ish0.dat**

    The spin- and orbital-dependent occupation numbers as a function of the iteration number.
    This is the data corresponding to the figure iter_occup-ish0.png (see :ref:`program_dcore_check`).

    .. todo::
        numerical data

-   **check/iter_spin-ish0.dat**

    The spin moments as a function of the iteration number.
    This is the data corresponding to the figure iter_spin-ish0.png (see :ref:`program_dcore_check`).

    .. todo::
        numerical data

-   **check/sigma.dat**

    The local self energy at the final step.

    ::

       # Local self energy at imaginary frequency
       # [Column] Data
       # [1] Frequency
       # [2] Re(Sigma_{shell=0, spin=up, 0, 0})
       # [3] Im(Sigma_{shell=0, spin=up, 0, 0})
       # [4] Re(Sigma_{shell=0, spin=down, 0, 0})
       # [5] Im(Sigma_{shell=0, spin=down, 0, 0})
       -157.001093 0.994751 0.006358 0.994751 0.006358
       -156.844013 0.994751 0.006365 0.994751 0.006365
       -156.686934 0.994751 0.006371 0.994751 0.006371
       :

``dcore_spectrum``
~~~~~~~~~~~~~~~~~~~~

-   **post/dos.dat**

    The k-integrated single-particle excitation spectrum :math:`A(\omega)` (density of states).

    ::

        # [1] Energy
        # [2] Total DOS of spin up
        # [3] Total DOS of spin down
        # [4] PDOS of shell0,spin up,band0
        # [5] PDOS of shell0,spin down,band0
        -5.000000 0.010048 0.010048 0.010048 0.010048
        -4.972431 0.010299 0.010299 0.010299 0.010299
        -4.944862 0.010562 0.010562 0.010562 0.010562
        -4.917293 0.010837 0.010837 0.010837 0.010837
        -4.889724 0.011126 0.011126 0.011126 0.011126
        :

-   **post/akw.dat**

    The single-particle excitation spectrum :math:`A(\boldsymbol{k}, \omega)` on the given k-path.
    See :ref:`program_dcore_spectrum` for how to plot this data.

    ::

        0.000000 -5.000000 0.092677
        0.000000 -4.972431 0.097063
        0.000000 -4.944862 0.101755
        0.000000 -4.917293 0.106779
        0.000000 -4.889724 0.112165
        0.000000 -4.862155 0.117947
        0.000000 -4.834586 0.124162
        0.000000 -4.807018 0.130850
        0.000000 -4.779449 0.138058
        0.000000 -4.751880 0.145834
        :

-   **post/momdist.dat**

    The momentum distribution function.

    ::

        # Momentum distribution
        # [Column] Data
        # [1] Distance along k-path
        # [2] Re(MomDist_{spin=up, 0, 0})
        # [3] Im(MomDist_{spin=up, 0, 0})
        # [4] Re(MomDist_{spin=down, 0, 0})
        # [5] Im(MomDist_{spin=down, 0, 0})
        0.000000 0.948389 -0.000000 0.948389 -0.000000
        0.005000 0.948368 -0.000000 0.948368 -0.000000
        0.010000 0.948303 -0.000000 0.948303 -0.000000
        :
