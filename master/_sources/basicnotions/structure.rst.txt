.. _structure:

Minimum introduction: Structure of DCore
========================================

Data flow
---------

**DCore** contains a set of programs which perform dynamical mean-field theory (DMFT) calculations for models and materials.
The structure of programs and data flow is summarized below.

.. image:: images/structure.png
   :width: 700
   :align: center

..
  **DCore** is a set of DMFT (Dynamical Mean Field Theory) programs which works together with other first-principles calculation packages.
  **DCore** supports input hopping parameters in the wannier90 format.
  Simple preset models such as a tight-binding model on the Bethe lattice are also available.
  After the DMFT loop is finished, one can compute physical quantities such as the density of states and the momentum-resolved spectrum functions using the post-processing tool.

**DCore** consists of three layers: (i) interface layer, (ii) DMFT loop, and (iii) post-processing.
Those are respectively performed by the executables ``dcore_pre``, ``dcore``, and ``dcore_post``.
Input parameters are provided by a single text file, which is read by all the three programs.
Data generated by ``dcore_pre`` and ``dcore`` are severally stored in a file with HDF5 format and passed to the next process.


(i) The interface layer ``dcore_pre``
-------------------------------------

..
  The pre-processing tool, ``dcore_pre`` can generate models from the wannier orbitals
  as well as intrinsic model-generator (Standard interface).

``dcore_pre`` generates a HDF5 file necessary for the DMFT loop.
Users specify parameters defining a model such as hopping parameters on a certain lattice, and interactions.
The hopping parameters are given either for **preset models** (e.g., square lattice, Bethe lattice) or using **Wannier90 format**

..
    There are two types of interfaces: **standard interface** for models and **Wannier90 interface** for materials.

    -   Standard interface

        The preset models include

        * Bethe lattice
        * Chain lattice
        * Square lattice
        * Cubic lattice

    ..
      For more details, please see :ref:`inputformat`.

    -   Wannier90 interface

        Results of ab-initio calculations can be imported into **DCore**.
        ``dcore_pre`` reads the hopping parameters in the Wannier90 format and transform to HDF5.


(ii) DMFT loop ``dcore``
------------------------

``dcore`` is the main program for the DMFT calculations.
The effective impurity problem is solved repeatedly to fulfill the self-consistency condition of the DMFT.
For solving the impurity problem, ``dcore`` calls an external program such as the continuous-time quantum Monte Carlo method and the Hubbard-I approximation.

(iii) Post-processing ``dcore_post``
------------------------------------

``dcore_post`` computes some physical quantities from the converged solution of the DMFT loop.
Currently, the following quantities can be calculated:

* (projected) density of states
* Correlated band structures (momentum-resolved single-particle excitation spectrum)
